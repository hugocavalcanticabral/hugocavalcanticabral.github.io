<!DOCTYPE html>
<html lang="pt-br">
	<head>
		<title>Treinamento UFRN</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="refresh" content="30">
		<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
		<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
		<script> 
			$(function(){
				$("#header").load("header.html"); 
			});
		</script>
		<script>
			$(function(){
				var jqXhr = $.getJSON("https://api.github.com/repositories/60697123/contents/treinamento", function (data) {})

				.done(function(parsedResponse,statusText,jqXhr) {
					var objeto = jqXhr.responseText;

					var json = $.parseJSON(objeto);
					
					var text = "";
					
					var base_inicio1 = "<a href='?contestNumber=";
					var base_inicio2 ="' onclick=\"load_contest('";
					var base_meio = "')\">";
					var base_fim="</a><br>"
					
					for (var i in json) {
						//console.log(json[i].name);
						if(json[i].name.search("contest ")!=-1){
							var dir;
							dir = base_inicio1;
							dir += (json[i].name.replace("contest ", "")).replace(".txt", "");
							dir +=base_inicio2;
							dir += json[i].download_url;
							dir += base_meio;
							dir += json[i].name.replace(".txt", "");
							dir += base_fim;
					
							text += dir;
						}
					}
					document.getElementById('contestList').innerHTML = text;
				});
			});
		</script>
	</head>
	<body>
		<div id="header"></div>
		<ul class="nav nav-tabs">
			<li><a href="training.html">Rating</a></li>
			<li><a href="contest.html">Contest mode</a></li>
		</ul>
		
		<div class="row">
			<div class="col-xs-5 col-md-3">
				<h4>Contest List</h4>
				<div id="contestList"> </div>
			</div>
			<div class="col-xs-13 col-md-9" id="presentation">
			
			</div>
		</div>
	</body>
	<script>
		$(function load_contest(url){
		
			$.get(url, function(data){
			  alert(data);
			});
		
			/*var startTime
			var endTime
			var text = "";
			text = "<table border="1" style='width:100%'> <tr>	<td>User</td> <td>Score</td> ";*/
		
		
			//"<td>50</td> </tr>";
			//document.getElementById('presentation').innerHTML = text;
		});
	</script>
	<script>
		function getUrl( name, url ) {
			if (!url) url = location.href;
			
			name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
			var regexS = "[\\?&]"+name+"=([^&#]*)";
			var regex = new RegExp( regexS );
			var results = regex.exec( url );
			
			console.log(results[1]);
			
			if(results!=null) load_contest("https://raw.githubusercontent.com/hugocavalcanticabral/hugocavalcanticabral.github.io/master/treinamento/contest%20" + results[1] + ".txt");
			//return results == null ? null : results[1];
		};
		getUrl('contestNumber');
	</script>
</html>
