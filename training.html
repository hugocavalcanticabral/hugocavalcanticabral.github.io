<!DOCTYPE html>
<html lang="pt-br">
	<head>
		<title>Treinamento UFRN</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
		<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
		<script> 
			$(function(){
				$("#header").load("header.html"); 
			});
		</script> 
		<script>
			$(function(){
				var colors = ["#ff0000", "#ffff00", "#009900", "#00ffff", "#0033cc", "#cc33ff", "#660066", "#66ff66", "#ff6699"];
				var jqXhr = $.getJSON("https://api.github.com/repos/hugocavalcanticabral/hugocavalcanticabral.github.io/contents/treinamento/users", function (data) {})

				.done(function(parsedResponse,statusText,jqXhr) {
					var objeto = jqXhr.responseText;

					var json = $.parseJSON(objeto);
					
					var text = "";
					
					var base_inicio1 = "<a style=\"color:";
					var base_inicio2 = "\" href='#' onclick=\"load_user('";
					var base_meio = "')\">";
					var base_fim="</a><br>"
					
					for (var i in json) {
						var dir;
						dir = base_inicio1;
						dir += colors[i];
						dir += base_inicio2;
						dir += json[i].name.replace(".txt", "");
						dir += base_meio;
						dir += json[i].name.replace(".txt", "");
						dir += base_fim;
					
						text += dir;
					}
					document.getElementById('users').innerHTML = text;
				});
			});
		</script>
	</head>
	<body>
		<div id="header"></div>
		<div class="row">
			<div class="col-xs-4 col-md-2" id="users"> </div>
			<div class="col-xs-14 col-md-10">
				<canvas id="plot" width="1000" height="600" style="border:1px solid #d3d3d3;">
				Your browser does not support the HTML5 canvas tag.</canvas>
			</div>
		</div>
	</body>
	<script>
		var c = document.getElementById("plot");
		var ctx = c.getContext("2d");
		ctx.beginPath();
		ctx.lineWidth=3;
		ctx.moveTo(0, 300);
		ctx.lineTo(1000,300);
		ctx.font = "15px Arial";
		ctx.fillText("Div 1",0,295);
		ctx.fillText("Div 2",0,315);
		ctx.stroke();
	</script>
	<script>
		function load_user(str){
			var colors = ["#ff0000", "#ffff00", "#009900", "#00ffff", "#0033cc", "#cc33ff", "#660066", "#66ff66", "#ff6699"];
			var jqXhr = $.getJSON("https://api.github.com/repos/hugocavalcanticabral/hugocavalcanticabral.github.io/contents/treinamento/users", function (data) {})

			.done(function(parsedResponse,statusText,jqXhr) {
				var objeto = jqXhr.responseText;

				var json = $.parseJSON(objeto);
				
				var c = document.getElementById("plot");
				var ctx = c.getContext("2d");
				ctx.beginPath();
				ctx.lineWidth=3;
				
				for (var i in json) {
					if(str=='all' || str==json[i].name.replace(".txt", ""))
					{
						console.log( str + " aqui" );
						ctx.strokeStyle=colors[i];
						ctx.moveTo(0, 400);
						
						//LENDO TEXTO
						var txtFile = new XMLHttpRequest();
						txtFile.open("GET", json[i].download_url, true);
						txtFile.onreadystatechange = function()
						{
							if (txtFile.readyState === 4) {  // document is ready to parse.
								if (txtFile.status === 200) {  // file is found
									console.log(" aaaaaaaaaaaqui" );
									allText = txtFile.responseText; 
									lines = txtFile.responseText.split("\n");
									console.log(" aaaaaaaaaaaqui" );
									//document.getElementById('users').innerHTML = "alltext = " + alltext;
									document.getElementById('users').innerHTML = "lines   = " + lines;	///
									
									
									for(j=0 ; j<lines.length() ; j++){
										ctx.lineTo((j+1)*15, 400-(lines[j]-1000));
										ctx.stroke();
									}
								}
							}
						}
						txtFile.send(null);
						//
					}
				}
			});
		};
	</script>
</html>
